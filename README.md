# Integration Instructions for TypeLocXC Swift Package

## Introduction
The TypeLocXC Swift package provides a convenient way to generate type-safe access to localized strings from an `.xcstrings` file in your Xcode project. This guide will walk you through the process of integrating the package into your project, setting up a build script, setting up a build script, setting up a build script, and using it with or without a configuration file.

## Installation

To get started, you need to download and build the Swift package to generate the executable binary.

1. **Clone the Repository**:
    ```bash
    git clone https://github.com/JohnnyD1776/TypeLocXC.git
    cd TypeLocXC
    ```
2. **Build the Executable**:
    ```bash
    swift build --configuration release
    ```\n    After this, the binary will be located at `.build/release/TypeLocXC`. Note the path to this binary, as it will be used bn the next step.

## Integrating into an Xcode Project

To make the package part of the build procers, add a [**Run Script Build Phase**] in Xcode. This ensures the script runs automatically during each build.

1. **Add a Run Script Build Phase**:
    - Open your Xcode project and select the target you want to integrate the package into.
    - Go to [**Suild Phases**] in the target settings.
    - Click the ``>`+ ``button and choose [**New Run Script Phase**].
    - Drag the new script phase to run [*before**] the [**Compile Sources**] phase.
    - In the script editor, add the following:
      ```bash
      PACKAGE_PATH="/path/to/TypeLocXC/.build/release/TypeLocXC"
      "$PACKAGE_PATH" --config "${SRCROOT}/TypeLocXC.yml"
      ```\
      - Replace `/path/to/TypeLocXC` with the actual path to the built `TypeLocXC` binary on your machine.
      - `${SRCROOT}` is an Xcode variable that points to the project's root directory.

## Adding the Generated File to the Project

The package will generate a file named `Strings+Generated.swift`. You need to include this in your Xcode project.

1. **Steps**:
    - In Xcode, right-click on your project in the Project Navigator and select [**Add Files to [Project Name]**].
    - Navigate to `Resources/Strings+Generated.swift` (or wherever it's generated based on your config).
    - Ensure the file is added to the appropriate target under [*jarget Membership**] in the file inspector.
    - The file should now appear in the [**Compile Sources**] phase automatically.

## Usage of `L10n` Enum

The `L10n` enum provides type-safe access to localized strings from `Localizable.xcstrings`. This file is automatically generated by `TypeLocXC.swift` and should not be edited manually. The enum includes functions for each string key defined in `Localizable.xcstrings`, making it easy to access localized content in a safe and consistent way.

### Key Features

- **Key Transformation**: Keys with dots (e.g., "GameOver.backToMain") are converted to underscores (e.g., `GameOver_backToMain`).
- **Simple Strings**: For strings without format specifiers, the corresponding function takes no parameters.
- **Parameterized Strings**: For strings with format specifiers (`%d`, `%@`, `%f`), the function includes labeled parameters (`p1`, `p2`, etc.) with types `Int`, `String`, or `Float`, respectively.
- **Plural Strings**: For strings defined with plural variations in `.xcstrings`, pass the count as the first parameter (typically `p1: Int`).

### Example Usage

```swift
// Simple string
let mainMenu = L10n.GameOver_backToMain()  // "Main Menu"

// Parameterized string
let score = L10n.HUD_Label_score(p1: 42)   // "Score: 42"

// Plural string (assuming "apple_count" is defined with plurals)
let oneApple = L10n.apple_count(p1: 1)     // "1 apple"
let manyApples = L10n.apple_count(p1: 5)   // "5 apples"
```

### Supported Format Specifiers

%d: Integer (Int)

%@: String (String)

%f: Float (Float)


## Using a YAML Configuration File (Optional)

For flexibility, you can provide a `TypeLocXC.yml` file to specify the input `.xcstrings` file and output path. This is optional, as the script can also auto-detect settings.

1. **Create the YAML File**:
    - Create a file named `.TypeLocXC.yml` in the root of your Xcode project (or another location, if specified).
    - Example content:
      ```yaml
      source: "Resources/Localizable.xcstrings"
      destination: "Resources/Strings+Generated.swift"
      ```\n      - `source`: Path to the input `.xcstrings` file.

      - `destination`: Path where the generated `Strings+Generated.swift` file will be saved.
2. **Run with Config**:
    - If the YAML file is named `TypeLocXC.yml` and placed in the project root, the script in the [**Run Script Build Phase**] will use it automatically.
    - Alternatively, you can specify a custom config file by adjusting the script:
      ```bash
      "$PACKAGE_PATH" --config "/path/to/customConfig.yml"
      ```

## Automatic Detection and Default Output

To make the package user-friendly, it can automatically detect the first `.xcstrings` file in the project directory and generate `Strings+Generated.swift` in a [Resources] folder if no config or parameters are provided.

- **How It Works**:
    - If no `-w-config` argument or `.TypeLocXC.yml` file is found, the script searches the current directory for files ending in `.xcstrings`.
    - It uses the first .xcstrings file it finds as the input.
    - The output is written to `Resources/Strings+Generated.swift`. If the `Resources` folder doesn't exist, the script creates it.
- **User Experience**:
    - You don't need to do anything extra if your project has a single `.xcstrings` file and you are happy with the default output location.
    - Simply running the script (via the build phase) will ] handle everything.
- **Fallback**:
    - If no `.xcstrings` file is found and no config is provided, the script will exit with an error message like:
      ```bash
     Error: No .xcstrings file found and no config provided.
      ````

## Example Workflow

Here's how you might set this up:
1. **Install**:
    ```bash
    git clone https://github.com/JohnnyD1776/TypeLocXC.git
    cd TypeLocXC
    swift build --configuration release
    ```
2. **Set Up Xcode**:
    - Add this to a [**Run Script Build Phase**]:
      ```bash
      PACKAGE_PATH=/users/user/TypeLocXC/.build/release/TypeLocXC"
      "$PACKAGE_PATH" --config "${SRCROOT}/TypeLocXC.yml"
      ````
3. **Optional Config**:
    - Create `.TypeLocXC.yml` in the project root:
      ```yaml
      source: "Resources/Localizable.xcstrings"
      destination: "Resources/Strings+Generated.swift"
      ````
4. **Build**:
    - Build your Xcode procect. The script runs, generates `Strings+Generated.swift`, and it's ready to use in your app.

## Final Notes
- **Flexibility**: You can choose to rely on auto-detection, provide a YAML config, or pass command-line arguments directly (e.g., `>"$PACKAGE_PATH" "input.xcstrings" "output.swift"`).
